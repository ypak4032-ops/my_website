<!DOCTYPE html>
<html lang="fa">
<head>
<meta charset="UTF-8">
<title>Neon WireGuard Panel</title>

<style>
body{
    margin:0;
    background:radial-gradient(circle at top,#0f2027,#000);
    font-family:monospace;
    color:#00ffe1;
}
.panel{
    max-width:950px;
    margin:40px auto;
    padding:30px;
    background:rgba(0,0,0,0.85);
    border-radius:20px;
    box-shadow:0 0 40px #00ffe1;
}
h1{
    text-align:center;
    color:#00ff88;
    text-shadow:0 0 15px #00ff88;
}
select,input,button{
    width:100%;
    padding:12px;
    margin:10px 0;
    background:#000;
    color:#00ffe1;
    border:1px solid #00ffe1;
    border-radius:12px;
    font-size:16px;
}
button{
    cursor:pointer;
    font-weight:bold;
    background:linear-gradient(90deg,#00ff88,#00ffe1);
    color:#000;
}
pre{
    background:#000;
    padding:20px;
    border-radius:12px;
    box-shadow:inset 0 0 25px #00ffe1;
    white-space:pre-wrap;
    word-break:break-all;
}
.status{
    margin-top:15px;
    color:#00ff88;
    font-weight:bold;
}
</style>
</head>

<body>
<div class="panel">

<h1>âš¡ Neon WireGuard Config Generator âš¡</h1>

<label>ğŸ—„ Ø§Ù†ØªØ®Ø§Ø¨ Ø³Ø±ÙˆØ± (ÙˆØ§Ù‚Ø¹ÛŒâ€ŒÙ†Ù…Ø§):</label>
<select id="server"></select>

<label>âœï¸ Ø§Ø³Ù… Ú©Ø§Ù†ÙÛŒÚ¯:</label>
<input id="configname" placeholder="Ù…Ø«Ù„Ø§Ù‹ NeonVPN-01">

<button onclick="generateConfig()">ğŸš€ Ø³Ø§Ø®Øª Ú©Ø§Ù†ÙÛŒÚ¯</button>
<button onclick="downloadConfig()">ğŸ’¾ Ø¯Ø§Ù†Ù„ÙˆØ¯ Ú©Ø§Ù†ÙÛŒÚ¯</button>

<div class="status" id="status"></div>
<pre id="output"></pre>

</div>

<script>
// ---------- Ø§Ø¨Ø²Ø§Ø±Ù‡Ø§ ----------
function randHex(){
    return Math.floor(Math.random()*65536).toString(16).padStart(4,"0");
}

function ipv6(template){
    return template.replace(/xxxx/g,randHex);
}

function ipv4(){
    return `${Math.floor(Math.random()*223)+1}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}.${Math.floor(Math.random()*255)}`;
}

// ---------- Base64 ÙˆØ§Ù‚Ø¹ÛŒ WireGuard ----------
function generateWGKey(){
    const bytes = new Uint8Array(32);
    crypto.getRandomValues(bytes);
    let binary="";
    bytes.forEach(b=>binary+=String.fromCharCode(b));
    return btoa(binary);
}

// ---------- Ø³Ø±ÙˆØ±Ù‡Ø§ ----------
const servers=[];
for(let i=1;i<=20;i++){
    servers.push({
        name:`Server-${i}`,
        users:Math.floor(Math.random()*300)+50,
        volume:`${Math.floor(Math.random()*900)+100}GB`,
        duration:`${Math.floor(Math.random()*11)+1} Ù…Ø§Ù‡`
    });
}

const serverSelect=document.getElementById("server");
servers.forEach((s,i)=>{
    const opt=document.createElement("option");
    opt.value=i;
    opt.textContent=`${s.name} | ğŸ‘¥ ${s.users} | ğŸ’¾ ${s.volume} | â³ ${s.duration}`;
    serverSelect.appendChild(opt);
});

let finalConfig="";

// ---------- Ø³Ø§Ø®Øª Ú©Ø§Ù†ÙÛŒÚ¯ ----------
function generateConfig(){
    const s=servers[serverSelect.value];

    const privateKey = generateWGKey();   // Base64 Ù…Ø¹ØªØ¨Ø±
    const publicKey  = generateWGKey();   // Base64 Ù…Ø¹ØªØ¨Ø±

    const address = ipv6("2001:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx")+"/128";

    const dns4 = "78.157.32.205, 78.157.32.202";
    let dns6=[];
    for(let i=0;i<5;i++){
        dns6.push(ipv6("de02:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx:xxxx"));
    }

    const endpoint = ipv4()+":51820";

    finalConfig =
`# ${s.name}
# Users: ${s.users}
# Volume: ${s.volume}
# Duration: ${s.duration}

[Interface]
PrivateKey = ${privateKey}
Address = ${address}
DNS = ${dns4}, ${dns6.join(", ")}
MTU = 1420

[Peer]
PublicKey = ${publicKey}
Endpoint = ${endpoint}
PersistentKeepalive = 25
`;

    document.getElementById("output").textContent = finalConfig;
    document.getElementById("status").textContent = "âœ… Ú©Ø§Ù†ÙÛŒÚ¯ ÙØ¹Ø§Ù„ Ø´Ø¯";
}

// ---------- Ø¯Ø§Ù†Ù„ÙˆØ¯ ----------
function downloadConfig(){
    if(!finalConfig){
        alert("Ø§ÙˆÙ„ Ú©Ø§Ù†ÙÛŒÚ¯ Ø¨Ø³Ø§Ø²");
        return;
    }
    const name=document.getElementById("configname").value || "wireguard";
    const blob=new Blob([finalConfig],{type:"text/plain"});
    const a=document.createElement("a");
    a.href=URL.createObjectURL(blob);
    a.download=name+".conf";
    a.click();
}
</script>

</body>
</html>